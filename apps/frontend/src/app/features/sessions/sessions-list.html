<div class="sessions-page">
  <header class="sessions-page__header">
    <h1 class="sessions-page__title">Sessions de jeu</h1>
    <p class="sessions-page__subtitle">
      Découvrez les parties organisées près de chez vous ou en ligne
    </p>
  </header>

  <!-- Loading State -->
  <div *ngIf="loading" class="sessions-page__loading">
    <div class="spinner"></div>
    <p>Chargement des sessions...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="sessions-page__error">
    <p>{{ error }}</p>
    <button type="button" (click)="loadSessions()" class="button button--primary">
      Réessayer
    </button>
  </div>

  <!-- Filters Panel -->
  <div *ngIf="!loading && !error" class="filters-panel">
    <div class="filters-header">
      <h3>
        🔍 Filtres
        <span *ngIf="getActiveFiltersCount() > 0" class="active-filters-count">
          {{ getActiveFiltersCount() }}
        </span>
      </h3>
      <button 
        (click)="resetFilters()" 
        class="btn-clear-filters"
        [disabled]="getActiveFiltersCount() === 0"
      >
        🔄 Réinitialiser
      </button>
    </div>

    <div class="filters-grid">
      <!-- Search Bar -->
      <div class="filter-group">
        <label for="search">Recherche</label>
        <input 
          type="text" 
          id="search" 
          [(ngModel)]="searchTerm" 
          (input)="applyFilters()"
          placeholder="Nom, jeu, description..."
          class="search-input"
        />
      </div>

      <!-- Session Type Filter (Radio Buttons) -->
      <div class="filter-group">
        <div class="filter-label">Type de session</div>
        <div class="radio-group">
          <label class="radio-label">
            <input 
              type="radio" 
              name="sessionType" 
              value="all"
              [(ngModel)]="sessionType" 
              (change)="applyFilters()"
            />
            <span>📋 Toutes</span>
          </label>
          <label class="radio-label">
            <input 
              type="radio" 
              name="sessionType" 
              value="online"
              [(ngModel)]="sessionType" 
              (change)="applyFilters()"
            />
            <span>💻 En ligne</span>
          </label>
          <label class="radio-label">
            <input 
              type="radio" 
              name="sessionType" 
              value="onsite"
              [(ngModel)]="sessionType" 
              (change)="applyFilters()"
            />
            <span>🎲 Sur table</span>
          </label>
        </div>
      </div>

      <!-- Game System Filter -->
      <div class="filter-group">
        <label for="game-filter">Système de jeu</label>
        <select 
          id="game-filter" 
          [(ngModel)]="selectedGameSystem" 
          (change)="applyFilters()"
          class="type-select"
        >
          <option value="">Tous les jeux</option>
          <option *ngFor="let game of gameSystems" [value]="game">
            {{ game }}
          </option>
        </select>
      </div>

      <!-- Availability Filter -->
      <div class="filter-group">
        <label class="checkbox-label checkbox-label--standalone">
          <input 
            type="checkbox" 
            [(ngModel)]="onlyAvailable" 
            (change)="applyFilters()"
          />
          <span>✅ Uniquement les sessions avec places disponibles</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Sessions List -->
  <div *ngIf="!loading && !error" class="sessions-list">
    <!-- Results count -->
    <div class="sessions-list__header">
      <h2>
        Sessions disponibles 
        <span class="count">({{ filteredSessions.length }} / {{ sessions.length }})</span>
      </h2>
    </div>

    <div *ngIf="filteredSessions.length === 0" class="sessions-list__empty">
      <p>Aucune session ne correspond à vos critères de recherche.</p>
      <button type="button" (click)="resetFilters()" class="button button--secondary">
        Réinitialiser les filtres
      </button>
    </div>

    <div class="sessions-list__cards">
      <app-session-card 
        *ngFor="let session of filteredSessions" 
        [session]="session"
      ></app-session-card>
    </div>
  </div>
</div>

